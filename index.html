<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="description" content="Just a website made by Vertliz for his Youtube channel" />
  <meta name="keywords" content="Vertliz, gaming, YouTube, tech content, gaming creator, worthless, worthless.no" />
  
  <!-- Social Media Cards -->
  <meta property="og:title" content="Worthless Website | Made by Vertliz" />
  <meta property="og:type" content="website" />
  <meta property="og:description" content="Just a website made by Vertliz for his Youtube channel" />

  <meta property="og:title" content="Worthless Site| Vertliz">
  <meta property="og:type" content="website">
  <meta property="og:description" content="Just a website made by Vertliz for his Youtube channel">
  <meta property="og:site_name" content="Worthless Site">
  <meta property="og:image" content="logo.png">
  <meta property="og:url" content="https://worthless.no/">
  <meta property="og:url" content="https://www.worthless.no/">


  <meta property="og:image" content="icon.png" />
  <meta property="og:url" content="https://worthless.no/" />
  <meta name="twitter:card" content="summary_large_image" />
  <link rel="icon" type="image/png" href="logo.png" />
  <meta name="theme-color" content="#7adbff" />
  <title>Worthless Website | Made by Vertliz</title>
  <link rel="stylesheet" href="style.css">
  
  <script>
    // Only load manifest if not on file:// protocol (for local testing)
    if (location.protocol !== 'file:') {
      const link = document.createElement('link');
      link.rel = 'manifest';
      link.href = 'manifest.json';
      document.head.appendChild(link);
    }
  </script>
</head>
<body>
  <a href="#main-content" class="skip-link">Skip to main content</a>
  
  <nav class="navbar">
    <div class="nav-logo">
      <img src="logo.png" alt="Logo" class="logo" />
      <span class="logo-text">Worthless</span>
    </div>    <div class="nav-links">
      <a href="#about">About</a>
      <a href="#latest">Latest YT</a>
      <a href="#support">Support</a>
      <a href="#faq">FAQ</a>
      <a href="#discord">Discord</a>
    </div>
  </nav>

  <button class="toggle-btn" onclick="toggleMode()" aria-label="Toggle dark/light mode">ðŸŒ“</button>
  <div class="container" id="main-content">
    <h1 class="gradient-text">Vertliz</h1>

    <section id="about">
      <h2>About Me</h2>
      <p>Hey, I'm Vertliz! I'm a passionate content creator focusing on gaming and creative tech content. Currently balancing content creation with high school life, I love sharing my gaming adventures and tech discoveries with my amazing community.</p>
        <div class="stats">
        <div class="stat-card">
          <div class="stat-number">111</div>
          <div>Subscribers</div>
        </div>
        <div class="stat-card">
          <div class="stat-number">13</div>
          <div>Videos</div>
        </div>
        <div class="stat-card">
          <div class="stat-number">1,912</div>
          <div>Total Views</div>
        </div>
      </div>
    </section>    <section id="latest">
      <h2>Latest Content</h2>
      <div id="latest-video">
        <iframe width="560" height="315" src="https://www.youtube.com/embed/Zip5Mmb7pKk?si=PAxowPZYBOSaSV1s" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
      </div>
      <a href="https://youtube.com/@Vertliz" class="yt-channel-btn" target="_blank" rel="noopener">
        <svg viewBox="0 0 24 24" fill="currentColor"><path d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"/></svg>
        Subscribe on YouTube
      </a>
    </section>

    <section id="socials">
      <h2>Connect With Me</h2>
      <div class="social-links">
        <a href="https://youtube.com/@Vertliz" class="social-link" target="_blank" rel="noopener" aria-label="YouTube">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"/></svg>
        </a>
        <a href="https://twitter.com/Vertliz" class="social-link" target="_blank" rel="noopener" aria-label="Twitter">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z"/></svg>
        </a>
        <a href="https://discord.gg/vertliz" class="social-link" target="_blank" rel="noopener" aria-label="Discord">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M20.317 4.37a19.791 19.791 0 00-4.885-1.515.074.074 0 00-.079.037c-.21.375-.444.864-.608 1.25a18.27 18.27 0 00-5.487 0 12.64 12.64 0 00-.617-1.25.077.077 0 00-.079-.037A19.736 19.736 0 003.677 4.37a.07.07 0 00-.032.027C.533 9.046-.32 13.58.099 18.057a.082.082 0 00.031.057 19.9 19.9 0 005.993 3.03.078.078 0 00.084-.028c.462-.63.874-1.295 1.226-1.994a.076.076 0 00-.041-.106 13.107 13.107 0 01-1.872-.892.077.077 0 01-.008-.128 10.2 10.2 0 00.372-.292.074.074 0 01.077-.01c3.928 1.793 8.18 1.793 12.062 0a.074.074 0 01.078.01c.12.098.246.198.373.292a.077.077 0 01-.006.127 12.299 12.299 0 01-1.873.892.077.077 0 00-.041.107c.36.698.772 1.362 1.225 1.993a.076.076 0 00.084.028 19.839 19.839 0 006.002-3.03.077.077 0 00.032-.054c.5-5.177-.838-9.674-3.549-13.66a.061.061 0 00-.031-.03zM8.02 15.33c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.956-2.419 2.157-2.419 1.21 0 2.176 1.096 2.157 2.42 0 1.333-.956 2.418-2.157 2.418zm7.975 0c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.955-2.419 2.157-2.419 1.21 0 2.176 1.096 2.157 2.42 0 1.333-.946 2.418-2.157 2.418z"/></svg>
        </a>
      </div>    </section>

    <section id="support">
      <div class="support-section">
        <h3>Support My Content</h3>
        <p>If you enjoy my content and want to support what I do, consider buying me a coffee!   Your support helps me create better content and keep improving.</p>        <script type='text/javascript' src='https://storage.ko-fi.com/cdn/widget/Widget_2.js'></script><script type='text/javascript'>kofiwidget2.init('Support me on Ko-fi', '#00a6ff', 'W7W41FN3NO');kofiwidget2.draw();</script> 

        
          <!-- YouTube Membership - Uncomment when ready -->
          <!-- 
          <a href="https://youtube.com/@Vertliz/join" class="yt-channel-btn" target="_blank" rel="noopener">
            <svg viewBox="0 0 24 24" fill="currentColor">
              <path d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"/>
            </svg>
            Become a Member
          </a>
          -->
        </div>
      </div>
    </section>

    <section id="faq">
      <h2>FAQ / PC Specs</h2>
      <ul class="faq-list">        <li>
          <strong>What PC do you use?</strong>
          <strong>Intel i5-12400F, RTX 3060 Ti, 16GB RAM</strong>
        </li>
        <li>
          <strong>What do you record/edit with?</strong>
          <strong>OBS Studio + DaVinci Resolve</strong>
        </li>
        <li>
          <strong>Are you open for collabs?</strong>
          <strong>Maybe, depending on what </strong>
        </li>
        <li>
          <strong>What games do you play?</strong>
          <strong>I usually play FiveM, Minecraft, and some other simulator games</strong>
        </li>
        <li>
          <strong>Upload schedule?</strong>
          <strong>Someitmes</strong>
        </li>
      </ul>
    </section>

    <section id="discord">
      <h2>Join My Communities</h2>
      <div class="discord-widgets">        <section>
          <h3>Worthless RP</h3>
          <iframe src="https://discord.com/widget?id=1345537251865657344&theme=dark" 
                  allowtransparency="true" 
                  frameborder="0" 
                  sandbox="allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts"
                  title="Worthless RP Discord">
          </iframe>
        </section>
        <section>
          <h3>Worthless Server</h3>
          <iframe src="https://discord.com/widget?id=855476959109709865&theme=dark" 
                  allowtransparency="true" 
                  frameborder="0" 
                  sandbox="allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts"
                  title="Worthless Server">
          </iframe>
        </section>
      </div>
    </section>
  </div>

  <footer>
    <p>Â© 2025 Vertliz. All rights reserved.</p>
  </footer>  <script>    // Configuration - Update this with your actual Cloudflare Worker URL
    // IMPORTANT: Replace 'worthless.vertlizofficial.workers.dev' with your actual worker URL
    // You can test if your worker is working by visiting: https://your-worker-url.workers.dev/health
    // If you don't have a worker deployed yet, the site will use fallback data
    const WORKER_API_URL = 'https://worthless.vertlizofficial.workers.dev';

    // Utility function for formatting numbers
    const formatNumber = (num) => {
      if (!num) return '0';
      if (num >= 1000000) return (num/1000000).toFixed(1) + 'M';
      if (num >= 1000) return (num/1000).toFixed(1) + 'K';
      return num.toString();
    };
    
    // Mobile menu functionality - only if mobile menu button exists
    const mobileMenuBtn = document.querySelector('.mobile-menu-btn');
    const navLinks = document.querySelector('.nav-links');
    
    if (mobileMenuBtn && navLinks) {
      mobileMenuBtn.addEventListener('click', () => {
        navLinks.classList.toggle('active');
      });

      // Close mobile menu when clicking a link
      document.querySelectorAll('.nav-links a').forEach(link => {
        link.addEventListener('click', () => {
          navLinks.classList.remove('active');
        });
      });

      // Close mobile menu when clicking outside
      document.addEventListener('click', (e) => {
        if (!e.target.closest('.nav-links') && !e.target.closest('.mobile-menu-btn')) {
          navLinks.classList.remove('active');
        }
      });
    }

    // Dark mode toggle with localStorage persistence
    function toggleMode() {
      document.body.classList.toggle('light-mode');
      localStorage.setItem('lightMode', document.body.classList.contains('light-mode'));
    }

    // Initialize dark/light mode from localStorage
    if (localStorage.getItem('lightMode') === 'true') {
      document.body.classList.add('light-mode');
    }

    // Intersection Observer for scroll animations
    const sections = document.querySelectorAll('section');
    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          entry.target.style.opacity = '1';
        }
      });
    }, { threshold: 0.1 });    sections.forEach(section => {
      observer.observe(section);
    });

    // Update stats periodically from the worker
    async function updateStats() {
      const statElements = {
        subscribers: document.querySelector('.stat-card:nth-child(1) .stat-number'),
        videos: document.querySelector('.stat-card:nth-child(2) .stat-number'),
        views: document.querySelector('.stat-card:nth-child(3) .stat-number')
      };

      // Show loading state
      Object.values(statElements).forEach(el => {
        el.textContent = 'Loading...';
      });

      try {
        console.log('Fetching stats from worker...');
        const response = await fetch(`${WORKER_API_URL}/stats`, {
          headers: {
            'Accept': 'application/json',
            'Cache-Control': 'no-cache'
          },
          mode: 'cors',
        });
        console.log('Response received:', response.status);
        
        if (!response.ok) {
          throw new Error(`HTTP error! status: ${response.status}`);
        }
          const stats = await response.json();
        console.log('Stats received:', stats);
        console.log('Stat elements:', statElements);
        
        // Check if elements exist
        if (!statElements.subscribers || !statElements.videos || !statElements.views) {
          console.error('Some stat elements not found!');
          return;
        }
        
        // Update numbers directly first, then animate
        statElements.subscribers.textContent = formatNumber(stats.subscribers);
        statElements.videos.textContent = formatNumber(stats.videos);
        statElements.views.textContent = formatNumber(stats.views);
        
        console.log('Stats updated successfully');
        
        // Store successful data in localStorage for future fallback
        localStorage.setItem('youtubeStats', JSON.stringify({
          ...stats,
          timestamp: Date.now()
        }));
      } catch (error) {
        console.error('Error fetching stats from worker:', error);
        
        // Try to use cached data first
        const cachedStats = localStorage.getItem('youtubeStats');
        if (cachedStats) {
          const parsed = JSON.parse(cachedStats);
          // Use cached data if it's less than 1 hour old
          if (Date.now() - parsed.timestamp < 3600000) {
            statElements.subscribers.textContent = formatNumber(parsed.subscribers);
            statElements.videos.textContent = formatNumber(parsed.videos);
            statElements.views.textContent = formatNumber(parsed.views);
            console.log('Using cached stats data');
            return;
          }
        }
        
        // Final fallback to static data
        const fallbackStats = {
          subscribers: 111,
          videos: 13, 
          views: 1912
        };
        
        statElements.subscribers.textContent = formatNumber(fallbackStats.subscribers);
        statElements.videos.textContent = formatNumber(fallbackStats.videos);
        statElements.views.textContent = formatNumber(fallbackStats.views);
        
        // Only show error if this is the first load
        if (!localStorage.getItem('youtubeStats')) {
          console.log('Using fallback stats - worker not available');
        }
      }
    }

    // Add helper functions for better UX
    function animateNumberUpdate(element, newValue) {
      const currentValue = parseInt(element.textContent.replace(/[^\d]/g, '')) || 0;
      const formattedNewValue = formatNumber(newValue);
      
      if (currentValue === newValue) {
        element.textContent = formattedNewValue;
        return;
      }
      
      element.style.transform = 'scale(1.1)';
      element.style.transition = 'transform 0.3s ease';
      
      setTimeout(() => {
        element.textContent = formattedNewValue;
        element.style.transform = 'scale(1)';
      }, 150);
    }

    function showErrorIndicator(message) {
      // Create or update error indicator
      let errorEl = document.querySelector('.error-indicator');
      if (!errorEl) {
        errorEl = document.createElement('div');
        errorEl.className = 'error-indicator';
        errorEl.style.cssText = `
          position: fixed;
          top: 80px;
          right: 20px;
          background: rgba(255, 122, 122, 0.9);
          color: white;
          padding: 10px 15px;
          border-radius: 5px;
          font-size: 0.9em;
          z-index: 1000;
          backdrop-filter: blur(8px);
          border: 1px solid rgba(255, 122, 122, 0.3);
          transform: translateX(100%);
          transition: transform 0.3s ease;
        `;
        document.body.appendChild(errorEl);
      }
      
      errorEl.textContent = message;
      errorEl.style.transform = 'translateX(0)';
      
      // Auto-hide after 5 seconds
      setTimeout(() => {
        errorEl.style.transform = 'translateX(100%)';
      }, 5000);
    }

    // Add loading indicator for stats
    function showStatsLoading() {
      const statElements = {
        subscribers: document.querySelector('.stat-card:nth-child(1) .stat-number'),
        videos: document.querySelector('.stat-card:nth-child(2) .stat-number'),
        views: document.querySelector('.stat-card:nth-child(3) .stat-number')
      };

      Object.values(statElements).forEach(el => {
        if (el) {
          el.innerHTML = '<div class="loading-spinner"></div>';
        }
      });
    }    // Enhanced stats update with loading state
    async function updateStatsEnhanced() {
      showStatsLoading();
      await updateStats();
    }

    // Fetch and embed latest video
    async function updateLatestVideo() {      try {
        console.log('Fetching latest video from worker...');
        const response = await fetch(`${WORKER_API_URL}/`, {
          headers: {
            'Cache-Control': 'no-cache'
          },
          mode: 'cors',
        });
        
        if (!response.ok) {
          throw new Error(`HTTP error! status: ${response.status}`);
        }
        
        const videoId = await response.text();
        console.log('Latest video ID:', videoId);
        
        if (videoId && videoId !== 'No video found' && videoId.length > 0) {
          const iframe = document.querySelector('#latest-video iframe');
          const newSrc = `https://www.youtube.com/embed/${videoId.trim()}?si=PAxowPZYBOSaSV1s`;
          
          // Only update if the video ID is different
          if (!iframe.src.includes(videoId.trim())) {
            iframe.src = newSrc;
            console.log('Updated video iframe with new video');
            
            // Store the video ID for future reference
            localStorage.setItem('latestVideoId', videoId.trim());
          }
        } else {
          console.log('No new video found or invalid video ID');
        }
      } catch (error) {
        console.error('Error fetching latest video:', error);
        console.log('Using fallback video - worker not available');
        // Keep the current embedded video as fallback
      }
    }

    // Fetch recent videos for enhanced content
    async function updateRecentVideos() {      try {
        console.log('Fetching recent videos...');
        const response = await fetch(`${WORKER_API_URL}/videos`, {
          headers: {
            'Accept': 'application/json',
            'Cache-Control': 'no-cache'
          },
          mode: 'cors',
        });
        
        if (!response.ok) {
          throw new Error(`HTTP error! status: ${response.status}`);
        }
        
        const data = await response.json();
        console.log('Recent videos received:', data);
        
        if (data.videos && data.videos.length > 0) {
          updateVideoGallery(data.videos);
        }
      } catch (error) {
        console.error('Error fetching recent videos:', error);
        console.log('Video gallery not available - worker not accessible');
        // Don't show video gallery if worker is not available
      }
    }

    function updateVideoGallery(videos) {
      // Find or create video gallery section
      let gallerySection = document.querySelector('#video-gallery');
      if (!gallerySection) {
        // Create gallery section after latest video
        const latestSection = document.querySelector('#latest');
        gallerySection = document.createElement('section');
        gallerySection.id = 'video-gallery';
        gallerySection.innerHTML = `
          <h2>Recent Videos</h2>
          <div class="video-grid"></div>
        `;
        latestSection.parentNode.insertBefore(gallerySection, latestSection.nextSibling);
      }
      
      const videoGrid = gallerySection.querySelector('.video-grid');
      
      // Skip the first video (latest) and show the next 4
      const recentVideos = videos.slice(1, 5);
      
      videoGrid.innerHTML = recentVideos.map(video => `
        <div class="video-card">
          <div class="video-thumbnail">
            <img src="${video.thumbnail}" alt="${video.title}" loading="lazy">
            <button class="play-button" onclick="window.open('https://youtube.com/watch?v=${video.id}', '_blank')" aria-label="Play ${video.title}">
              <svg viewBox="0 0 24 24" fill="currentColor">
                <path d="M8 5v14l11-7z"/>
              </svg>
            </button>
          </div>
          <div class="video-info">
            <h4>${video.title}</h4>
            <p>${new Date(video.publishedAt).toLocaleDateString()}</p>
          </div>
        </div>
      `).join('');
    }

    // Update recent videos on load
    updateRecentVideos();

    // Add CSS for video gallery if not already present
    function addVideoGalleryStyles() {
      if (document.querySelector('#video-gallery-styles')) return;
      
      const style = document.createElement('style');
      style.id = 'video-gallery-styles';
      style.textContent = `
        .video-grid {
          display: grid;
          grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
          gap: 1.5rem;
          margin: 2rem 0;
        }
        
        .video-card {
          background: rgba(25, 25, 40, 0.7);
          border-radius: 12px;
          overflow: hidden;
          transition: transform 0.3s ease, box-shadow 0.3s ease;
          border: 1px solid rgba(122, 219, 255, 0.1);
        }
        
        .video-card:hover {
          transform: translateY(-5px);
          box-shadow: 0 10px 25px rgba(0,0,0,0.3);
          border-color: rgba(122, 219, 255, 0.3);
        }
        
        .video-thumbnail {
          position: relative;
          overflow: hidden;
        }
        
        .video-thumbnail img {
          width: 100%;
          height: 160px;
          object-fit: cover;
          transition: transform 0.3s ease;
        }
        
        .video-card:hover .video-thumbnail img {
          transform: scale(1.05);
        }
        
        .play-button {
          position: absolute;
          top: 50%;
          left: 50%;
          transform: translate(-50%, -50%);
          background: rgba(255, 0, 0, 0.9);
          color: white;
          border: none;
          border-radius: 50%;
          width: 50px;
          height: 50px;
          cursor: pointer;
          transition: all 0.3s ease;
          display: flex;
          align-items: center;
          justify-content: center;
          opacity: 0;
        }
        
        .video-card:hover .play-button {
          opacity: 1;
          transform: translate(-50%, -50%) scale(1.1);
        }
        
        .play-button svg {
          width: 20px;
          height: 20px;
          margin-left: 2px;
        }
        
        .video-info {
          padding: 1rem;
        }
        
        .video-info h4 {
          margin: 0 0 0.5rem 0;
          font-size: 1rem;
          line-height: 1.3;
          color: #fff;
          display: -webkit-box;
          -webkit-line-clamp: 2;
          -webkit-box-orient: vertical;
          overflow: hidden;
        }
        
        .video-info p {
          margin: 0;
          font-size: 0.9rem;
          color: rgba(255, 255, 255, 0.7);
        }
        
        @media (max-width: 768px) {
          .video-grid {
            grid-template-columns: 1fr;
            gap: 1rem;
          }
        }
      `;
      document.head.appendChild(style);
    }
    
    addVideoGalleryStyles();

    // Connection status indicator
    function addConnectionStatus() {
      const statusEl = document.createElement('div');
      statusEl.id = 'connection-status';
      statusEl.style.cssText = `
        position: fixed;
        top: 80px;
        left: 20px;
        background: rgba(40, 167, 69, 0.9);
        color: white;
        padding: 8px 12px;
        border-radius: 20px;
        font-size: 0.8em;
        font-weight: 500;
        backdrop-filter: blur(8px);
        border: 1px solid rgba(40, 167, 69, 0.3);
        transform: translateX(-200px);
        transition: transform 0.3s ease;
        z-index: 1000;
      `;
      statusEl.innerHTML = 'ðŸŸ¢ Online';
      document.body.appendChild(statusEl);
      
      // Show status briefly on load
      setTimeout(() => statusEl.style.transform = 'translateX(0)', 1000);
      setTimeout(() => statusEl.style.transform = 'translateX(-200px)', 4000);
      
      // Monitor connection status
      window.addEventListener('online', () => {
        statusEl.innerHTML = 'ðŸŸ¢ Back Online';
        statusEl.style.background = 'rgba(40, 167, 69, 0.9)';
        statusEl.style.borderColor = 'rgba(40, 167, 69, 0.3)';
        statusEl.style.transform = 'translateX(0)';
        setTimeout(() => statusEl.style.transform = 'translateX(-200px)', 3000);
        
        // Refresh data when coming back online
        updateStatsEnhanced();
        updateLatestVideo();
        updateRecentVideos();
      });
      
      window.addEventListener('offline', () => {
        statusEl.innerHTML = 'ðŸ”´ Offline';
        statusEl.style.background = 'rgba(220, 53, 69, 0.9)';
        statusEl.style.borderColor = 'rgba(220, 53, 69, 0.3)';
        statusEl.style.transform = 'translateX(0)';
      });
    }
      addConnectionStatus();    // Service Worker registration for caching and PWA features
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('./sw.js')
          .then((registration) => {
            console.log('SW registered: ', registration);
          })
          .catch((registrationError) => {
            console.log('SW registration failed: ', registrationError);
            // Continue without service worker - not critical for functionality
          });
      });
    }// Initialize all features when DOM is loaded
    document.addEventListener('DOMContentLoaded', async () => {
      console.log('DOM loaded, initializing features...');
      
      // Test worker connection first
      const workerHealthy = await testWorkerConnection();
      
      if (workerHealthy) {
        // Start data updates
        updateStatsEnhanced();
        updateLatestVideo();
        updateRecentVideos();
        
        // Set up intervals
        window.statsInterval = setInterval(updateStatsEnhanced, 300000); // 5 minutes
        window.videoInterval = setInterval(updateLatestVideo, 1800000); // 30 minutes
        
        console.log('All features initialized successfully');
      } else {
        console.warn('Worker not available, using fallback data only');
        showErrorIndicator('API unavailable. Using cached data.');
      }
    });

    // Global error handling
    window.addEventListener('error', (e) => {
      console.error('Global error:', e.error);
      showErrorIndicator('Something went wrong. Please refresh the page.');
    });

    window.addEventListener('unhandledrejection', (e) => {
      console.error('Unhandled promise rejection:', e.reason);
      if (!navigator.onLine) {
        showErrorIndicator('You are offline. Some features may not work.');
      } else {
        showErrorIndicator('Network request failed. Check your connection.');
      }
    });    // Test worker connectivity
    async function testWorkerConnection() {
      try {
        console.log('Testing worker connection...');
        const response = await fetch(`${WORKER_API_URL}/health`, {
          method: 'GET',
          headers: {
            'Accept': 'application/json',
          },
          mode: 'cors',
        });
        if (response.ok) {
          const data = await response.json();
          console.log('Worker is healthy:', data);
          return true;
        } else {
          console.error('Worker health check failed:', response.status);
          return false;
        }
      } catch (error) {
        console.error('Worker connection test failed:', error);
        console.log('Using fallback mode - worker not accessible');
        return false;
      }
    }

    // ...existing code...
  </script>

  <!-- Ko-fi Widget -->
  <script src='https://storage.ko-fi.com/cdn/scripts/overlay-widget.js'></script>
  <script>
    kofiWidgetOverlay.draw('vertliz', {
      'type': 'floating-chat',
      'floating-chat.donateButton.text': 'Support me',
      'floating-chat.donateButton.background-color': '#794bc4',
      'floating-chat.donateButton.text-color': '#fff'
    });
  </script>
</body>
</html>
